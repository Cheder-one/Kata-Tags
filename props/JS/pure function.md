**Чистая функция** - это функция, которая возвращает результат только на основе своих входных аргументов (без опоры на внешнюю среду), без каких-либо побочных эффектов/ мутаций исходных данных.

### _Предсказуемость функции_

- Всегда возвращает одно и тоже значение для одних и тех же аргументов

Чистая функция:

```
function fn (x) {
	return x + 2
}
fn(1) /=/ 3
fn(1) /=/ 3
```

Не чистая функция:

```
function fn (x) {
	return x + Math.random()
}
fn(1) /=/ 1.6193170362103186
fn(1) /=/ 1.929294679159917
```

### _У функции не должно быть мутаций и побочных эффектов_

- функция не изменяет входные аргументы
- возвращает копию, а не мутирует исходный ссылочный элемент
- не изменяет окружающую среду в которой вызывается

Вариант реализации чистой функции через `spread-operator`:

```
const getArrSum = ([...arr], sum = 0) => {
  arr[0] = "ssss";
  return arr;
};

const arr = [1, 2, 3]; /=/ [ 1, 2, 3 ]
getArrSum(arr);        /=/ [ 'ssss', 2, 3 ]
console.log(arr);      /=/ [ 1, 2, 3 ]
```

Чистая функция:

```
function fn(point) {
	const pointCopy = { ...point };
	pointCopy.x = pointCopy.x * 2;
	pointCopy.y = pointCopy.y * 2;

	return pointCopy;
}
```

Не чистая функция:

```
function fn (point) {
	point.x = point.x * 2
	point.y = point.y * 2

	return point
}
```

![[mutable & immutable]]

### _Независимость от окружения и времени вызова_

- Не должна зависеть от внешней константы или внешней переменной
- Может быть вырвана из контекста и вызвана в любой временной момент и в любой части кода с предсказуемым результатом.

Не чистая функция:

```
const DELAY = 1;

function fn(input) {
	return input * DELAY;
}
```
