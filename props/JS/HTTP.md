**HTTP-протокол** - `определяет формат общения` между клиентом и сервером. То, как `клиентский агент`(например, веб-браузер) и `сервер` должны `общаться` между собой и как должны обмениваться данными. 

Такой формат общения включает в себя:
- **Методы** для обмена сообщениями (`GET, POST, PUT, DELETE`), для `запросов` и `ответов`
- **Статус-коды** ответов сервера. Сообщают успешность выполненного запроса клиента.
- **Заголовки** в сообщениях. Они несут в себе `мета-информацию` о сообщении.
  Например: 
	- **Content-Type**: Определяет тип содержимого тела сообщения
	- **Content-Length**: Указывает длину содержимого тела сообщения в байтах.
	- **Authorization**: Для передачи токена доступа или учетных данных пользователя.
	- **User-Agent**: Содержит информацию об устройстве отправляющем запрос.
	- **Cache-Control**: Управляет кэшированием содержимого на клиенте или сервере.
	- **Set-Cookie**: Для идентификации пользователя и восстановления сессии на сервере.
- **Тело сообщения** - Используется опционально, в зависимости от типа запроса/ответа. Переносит тело объекта которое относится к сообщению.
### _Процесс взаимодействия `клиента` и `сервера` по HTTP_

Когда `клиентский агент` и `сервер` `взаимодействуют` по протоколу `HTTP`, 
они `обмениваются` данными в виде `запросов` и `ответов`:

1. **Клиент** отправляет `HTTP-запрос` на `сервер`. 
   Запрос состоит из метода (`GET, POST, PUT, DELETE`), `URL-адреса` ресурса, `заголовков` и, возможно, `тела запроса`. 
2. **Сервер** принимает `запрос` от клиента и `анализирует` его. 
   Сервер `анализирует` `запрос`: метод запроса, URL-адрес и заголовки, `чтобы` `понять`, какую операцию нужно выполнить и какие данные требуются, `что нужно сделать`
3. **Сервер** `обрабатывает` запрос и `генерирует` `HTTP-ответ`. 
   `Ответ` включает `статусный код`, который указывает на успешность выполнения запроса (например, 200 OK, 404 Not Found), `заголовки` ответа и, возможно, `тело` ответа, содержащее данные, запрошенные клиентом.
4. **Сервер** `отправляет` `HTTP-ответ` обратно клиенту. 
   `Клиент` получает ответ и `анализирует` его. Он проверяет статусный код, заголовки и тело ответа для понимания результата запроса.
5. **Веб-браузер** (как `клиентский агент`) может `использовать` полученные `данные для отображения веб-страницы` или выполнения других действий в зависимости от приложения.

### _Способы общения клиента и сервера_

`HTTP-протокол`, `REST-архитектура`/`SOAP`... - все это так или иначе определяет `способы` общения `клиента` и `сервера` .

![[Pasted image 20231115182016.png]]

### _Клиент-серверная архитектура_

![[Pasted image 20231115182249.png]]

- `Клиент`(`потребитель`) - в качестве него может выступать `любое приложение` или даже `другой сервер`, а не обязательно какой-то браузер. 
- `Сервер`(`поставщик`) - это как правило `связка серверов`, а не не единый монолит. На них хранятся данные и выполняться действия(например, регистрация, добавление в корзину). В ответ, сервер возвращает `статус-ответ` об успешности `операции`.

### _HTTP - протокол_

`HTTP` это `гипертекстовых транспортный протокол`. С `помощью` него `общаются` большинство приложений в интернете. `HTTP` используется для `запроса` и `передачи` веб-страниц, изображений, видео, аудио и других `ресурсов` в Интернете.

Что это значит? 
- На `уровне приложений` в модели [[OSI]], протокол `HTTP` (`Hypertext Transfer Protocol`) является `протоколом передачи данных`, который используется для `обмена гипертекстовой информацией` между `клиентом` и `сервером`. 
- `HTTP` работает `поверх` протокола передачи данных `TCP/IP` (`Transmission Control Protocol/Internet Protocol`) и обеспечивает `коммуникацию` между веб-браузерами и веб-серверами. `HTTP` используется для `запроса` и `передачи` веб-страниц, изображений, видео, аудио и других `ресурсов` в Интернете.
___
Первоначальная идея `HTTP` - `обмен гипертекстовыми документами` `html`. Но теперь через `HTTP` можно предавать практически любые данные(`тексты`, `файлы`, `html`, `xml`, `json`)

![[Pasted image 20231115191418.png]]

### _Структура HTTP_

Протокол `HTTP` используется для `передачи данных` между `клиентом` и `сервером`. 
Поэтому структура `HTTP` разделяется на две основные части `Запрос` и `Ответ`.

![[Pasted image 20231115192017.png]]

### _HTTP-запрос_

`Запрос HTTP` представляет собой `сообщение`, `отправляемое клиентом` на сервер, чтобы 
`запросить` определенную `информацию` или `выполнить` определенное `действие`. 

`Запрос` включает в себя:
- `Стартовую строку`, которая содержит в себе:
	- `Методы` (`GET, POST, PUT, DELETE` и т.д.)
	  Метод это семантика запроса, что мы `хотим сделать`(получить, создать, обновить, удалить ресурс)
	- `URL-адрес ресурса` - то, куда мы отправляем запрос.
	- Версия `HTTP`
- `Заголовки`(`headers`). 
  Бывают `обязательные`, `необязательные`, `кастомные заголовки`. В них закладывается:
	- Информация `о хосте` с которого был отправлен запрос. 
	- Информация `о устройстве и браузере` с которого идет запрос. 
	- Тип контента (`json`, `txt`)
	- `Авторизационные` заголовки с `токенами`
	- `CORS-заголовки` - обеспечивают безопасность взаимодействия нескольких источников в сети, которые расположены на разных доменах. #CORS
- `Параметры запроса`(`query parameters`)
- И опционально, `Тело запроса`(`request body`) с данными(`POST`,`PUT`,`PATCH`)

![[Pasted image 20231115192835.png]]

### _HTTP-ответ_

`Ответ HTTP` представляет собой `сообщение`, отправляемое `сервером в ответ на запрос` клиента. 

![[Pasted image 20231115200116.png]]

Ответ включает в себя: 
- `Строку статуса`, которая содержит в себе:
	- `Статус-код`(`status code`), который указывает на `успешность` или `неудачу` запроса.
- `Заголовки`(`headers`) с дополнительной информацией 
- И опционально, `Тело ответа`(`response body`) с данными, которые сервер отправляет клиенту.

### _Методы запросов_

Методы запроса (`HTTP methods`) - это специальные `команды`, которые используются в протоколе `HTTP` для указания `типа операции`, которую `клиентский` агент (например, веб-браузер) `запрашивает от сервера`.

![[Pasted image 20231115200346.png]]

### _Статусы ответа HTTP_

`Код ответа`(`состояния`) `HTTP` показывает, был ли успешно выполнен определённый `HTTP-запрос`. Коды сгруппированы в 5 классов:

![[Pasted image 20231115181009.png]]

- **200 OK**: Запрос успешно выполнен. Сервер `возвращает` запрашиваемые `данные`.
- **201 Created**: Запрос успешно выполнен, и в результате был `создан новый ресурс`.  Обычно используется после успешного выполнения POST-запроса.
- **204 No Content**: `Запрос` успешно `выполнен`, но сервер `не возвращает содержимое` в ответе. Обычно используется `после` успешного выполнения `запроса на удаление`.
- **301 Moved Permanently**: Ресурс `поменял адрес` URL на новый. Клиент должен использовать новый URL для всех последующих запросов к этому ресурсу.
- **302 Found**: Ресурс `временно перемещен` на другой URL. Клиент должен использовать новый URL для текущего запроса, но может использовать исходный URL для будущих запросов.
- **40x (например, 400, 404)**: Эти коды указывают на `ошибку клиента`. Например, 400 Bad Request указывает на `неверный` или неполный `запрос`, а 404 Not Found указывает на то, что запрашиваемый `ресурс не найден`.
- **500 Internal Server Error**: Сервер `не может обработать` запрос из-за `внутренней ошибки`.
___
**Коды статуса** это тоже про `семантику`. 

На сервере мы можем выполнить действие с ошибкой и вернуть `код 200`, никто это сделать не помешает. Аналогично и с `методами`, мы можем использовать `GET` для создания ресурса, а не его получения. Но очевидно так никто не делает, тк это внесет непонимание.
